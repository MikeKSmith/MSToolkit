<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The Allocate component is responsible for allocating simulated
subjects to a treatment group."><title>Allocate treatment to subjects — allocateTreatments • MSToolkit</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Allocate treatment to subjects — allocateTreatments"><meta property="og:description" content="The Allocate component is responsible for allocating simulated
subjects to a treatment group."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MSToolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/MSToolkit_intro_vig.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/generate_data.html">generateData</a>
    <a class="dropdown-item" href="../articles/analyze_data.html">analyzeData</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Background Reading</h6>
    <a class="dropdown-item" href="../articles/simulation_overview.html">Simulation Overview</a>
    <a class="dropdown-item" href="../articles/references.html">References</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MikeKSmith/MSToolkit/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Allocate treatment to subjects</h1>
      <small class="dont-index">Source: <a href="https://github.com/MikeKSmith/MSToolkit/blob/HEAD/R/allocateTreatments.R" class="external-link"><code>R/allocateTreatments.R</code></a></small>
      <div class="d-none name"><code>allocateTreatments.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <em>Allocate</em> component is responsible for allocating simulated
subjects to a treatment group.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">allocateTreatments</span><span class="op">(</span></span>
<span>  <span class="va">trts</span>,</span>
<span>  <span class="va">subjects</span>,</span>
<span>  prop <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ordered <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="fu">.deriveFromMasterSeed</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  idCol <span class="op">=</span> <span class="fu"><a href="getEctdColName.html">getEctdColName</a></span><span class="op">(</span><span class="st">"Subject"</span><span class="op">)</span>,</span>
<span>  trtCol <span class="op">=</span> <span class="fu"><a href="getEctdColName.html">getEctdColName</a></span><span class="op">(</span><span class="st">"Trt"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>trts</dt>
<dd><p>(Required) Maximum number of treatments to which subjects can be
allocated.  Subjects will be allocated to treatments "1:trts"</p></dd>


<dt>subjects</dt>
<dd><p>(Required) Number of subjects to be allocated to each
treatment group</p></dd>


<dt>prop</dt>
<dd><p>(Optional) Proportion of subjects in each group.  By default,
equal proportions of subjects are assigned to each treatment arm</p></dd>


<dt>ordered</dt>
<dd><p>(Optional) Should treatments be allocated in order of subject
number (ie. first N subjects gets treatment 1) as opposed to random
assignment.  Default is FALSE (random assignment)</p></dd>


<dt>seed</dt>
<dd><p>(Optional) Random seed to allocate interims.  Based on the
current master seed by default</p></dd>


<dt>idCol</dt>
<dd><p>(Optional) Subject variable name.  "SUBJ" by default</p></dd>


<dt>trtCol</dt>
<dd><p>(Optional) Treatment variable name.  "TRT" by default</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame with subjects and treatment allocations.  This data
frame will contain 2 variables: <code>SUBJ</code>The Subjects identifier
<code>TRT</code>The Treatment numeric that the subject is allocated to ...</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Subjects numbered "1" to "sum(subjects)" are allocated to a single
treatment or treatment sequence.  The possible treatments are numbered "1"
to "trts".</p>
<p>If "subjects" is a single number, the proportion argument is used to
determine the proportion to be allocated to each treatment.  By default,
subjects are allocated randomly to each treatment group with probability
"1/trts".</p>
<p>If "subjects" is a vector with length "trts", this explicity defines the
number of subjects to be allocate to each treatment group.</p>
<p>If "ordered" is TRUE, the allocation is done in order (eg. subject 1 gets
treatment 1). This can be useful in simulations to quickly verify that the
correct number or proportion of subjects is allocated to each treatment. If
"FALSE", random allocation is performed.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Rich Pugh</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># allocate 6 subjects randomly to 3 treatment groups</span></span></span>
<span class="r-in"><span>  <span class="fu">allocateTreatments</span><span class="op">(</span>trts <span class="op">=</span> <span class="fl">3</span>, subjects <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Not all the treatments have been allocated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SUBJ TRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    2   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    3   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    4   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    5   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    6   1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># allocate 6 subjects randomly to 3 treatment groups</span></span></span>
<span class="r-in"><span>  <span class="co">#  and present in treatment order</span></span></span>
<span class="r-in"><span>  <span class="fu">allocateTreatments</span><span class="op">(</span>trts <span class="op">=</span> <span class="fl">3</span>, subjects <span class="op">=</span> <span class="fl">6</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SUBJ TRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    2   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    3   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    4   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    5   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    6   3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># allocate 2 subjects to group 1, 2 to group 2, 3 to group 3</span></span></span>
<span class="r-in"><span>  <span class="co"># First two subjects will be allocated to TRT 1</span></span></span>
<span class="r-in"><span>  <span class="fu">allocateTreatments</span><span class="op">(</span>trts <span class="op">=</span> <span class="fl">3</span>, subjects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SUBJ TRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    2   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    3   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    4   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    5   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    6   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    7   3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># allocation according to proportions</span></span></span>
<span class="r-in"><span>  <span class="co"># 6 subjects to allocate in total in 2 groups</span></span></span>
<span class="r-in"><span>  <span class="co"># 20% will be in group 1, 80% will be in group 2</span></span></span>
<span class="r-in"><span>  <span class="fu">allocateTreatments</span><span class="op">(</span>trts <span class="op">=</span> <span class="fl">2</span>, subjects <span class="op">=</span> <span class="fl">6</span>, prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.8</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Not all the treatments have been allocated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SUBJ TRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    2   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    3   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    4   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    5   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    6   2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># allocation according to proportions</span></span></span>
<span class="r-in"><span>  <span class="co"># 6 subjects to allocate in total in 2 groups</span></span></span>
<span class="r-in"><span>  <span class="co"># 20% will be in group 1, 80% will be in group 2</span></span></span>
<span class="r-in"><span>  <span class="co"># TRT 1 will be allocated first</span></span></span>
<span class="r-in"><span>  <span class="fu">allocateTreatments</span><span class="op">(</span>trts <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                     subjects <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>                     prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.8</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Not all the treatments have been allocated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SUBJ TRT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    2   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    3   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    4   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    5   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    6   2</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mike K Smith, Rich Pugh, Roman Francois, Francisco Gochez.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

