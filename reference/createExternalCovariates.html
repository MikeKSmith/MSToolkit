<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create covariates by sampling from an external file."><title>Create covariates by sampling from an external file — createExternalCovariates • MSToolkit</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create covariates by sampling from an external file — createExternalCovariates"><meta property="og:description" content="Create covariates by sampling from an external file."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MSToolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/MSToolkit_intro_vig.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/generate_data.html">generateData</a>
    <a class="dropdown-item" href="../articles/analyze_data.html">analyzeData</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Background Reading</h6>
    <a class="dropdown-item" href="../articles/simulation_overview.html">Simulation Overview</a>
    <a class="dropdown-item" href="../articles/references.html">References</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MikeKSmith/MSToolkit/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create covariates by sampling from an external file</h1>
      <small class="dont-index">Source: <a href="https://github.com/MikeKSmith/MSToolkit/blob/HEAD/R/createExternalCovariates.R" class="external-link"><code>R/createExternalCovariates.R</code></a></small>
      <div class="d-none name"><code>createExternalCovariates.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create covariates by sampling from an external file.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">createExternalCovariates</span><span class="op">(</span></span>
<span>  <span class="va">subjects</span>,</span>
<span>  <span class="va">names</span>,</span>
<span>  <span class="va">file</span>,</span>
<span>  sameRow <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  refCol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dataId <span class="op">=</span> <span class="va">idCol</span>,</span>
<span>  idCol <span class="op">=</span> <span class="fu"><a href="getEctdColName.html">getEctdColName</a></span><span class="op">(</span><span class="st">"Subject"</span><span class="op">)</span>,</span>
<span>  percent <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  seed <span class="op">=</span> <span class="fu">.deriveFromMasterSeed</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  includeIDCol <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  refColSuffix <span class="op">=</span> <span class="st">"refCol"</span>,</span>
<span>  workingPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>subjects</dt>
<dd><p>(Required) Number of subjects for which to sample sets of
external covariate values</p></dd>


<dt>names</dt>
<dd><p>(Required) Names of the covariates to use from the <code>file</code></p></dd>


<dt>file</dt>
<dd><p>(Required) Input file name.  This should be either a valid csv
file or a NONMEM data file containing all the variables given by
<code>names</code>, <code>idCol</code></p></dd>


<dt>sameRow</dt>
<dd><p>(Optional) A logical value).  Should all the covariates be
sampled from the same rows or should the sampling be done independantly for
each covariate.  Using <code>sameRow = TRUE</code> would maintain the multivariate
structure of the imported dataset and is faster.  TRUE by default</p></dd>


<dt>subset</dt>
<dd><p>(Optional) Any subset to be performed on the imported dataset
before doing any sampling. The subset is parsed by the
<code><a href="parseRangeCode.html">parseRangeCode</a></code> function.  No subsetting is performed by
default</p></dd>


<dt>refCol</dt>
<dd><p>(Optional) The reference column in the data file.  If given,
the output dataset will also contain an additional column indicating the
origin of each row from the original dataset. This option is not compatible
with <code>sameRow = FALSE</code>.  By default, reference variables are not used</p></dd>


<dt>dataId</dt>
<dd><p>(Optional) The subject variable in the input dataset, equal to
<code>idCol</code> by default.  By default, it will be the same as "idCol"</p></dd>


<dt>idCol</dt>
<dd><p>(Optional) The subject variable in the output dataset.  "SUBJ"
by default</p></dd>


<dt>percent</dt>
<dd><p>(Optional) When a subset is performed on the input data, if
the number of rows remaining in the dataset after subset is less than
<code>percent</code> \<!-- %, the function will issue a warning.  By default, 20\\% is -->
used</p></dd>


<dt>seed</dt>
<dd><p>(Optional) Random generator seed to use.  The current random
seed is used by default</p></dd>


<dt>includeIDCol</dt>
<dd><p>(Optional) A logical value.  Should the subject variable
be included in the output dataset?  When <code>createCovariates</code> calls this
function, it does not need the subject variable.  TRUE by default</p></dd>


<dt>refColSuffix</dt>
<dd><p>(Optional) The suffix to use when creating the
<code>refCol</code> variable.  If the <code>refCol</code> variable is "SUBJ", then in
the output dataset it will be created as "SUBJ" suffixed with
"refColSuffix".  By default, "refCol" is used as the suffix</p></dd>


<dt>workingPath</dt>
<dd><p>(Optional) Working path from which to import covariate
file.  By default, the current working directory is used</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame containing the imported variables, and possibly a
reference variable.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The sampling is always done with replacement.</p>
<p>The <code>refCol</code> setting is typically used with the parameter component,
see <code><a href="createParameters.html">createParameters</a></code> or <code><a href="createExternalParameters.html">createExternalParameters</a></code>
to maintain consistency between imported covariates and imported parameters.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="createContinuousCovariates.html">createContinuousCovariates</a></code>,
<code><a href="createDiscreteCovariates.html">createDiscreteCovariates</a></code>, and <code><a href="createCovariates.html">createCovariates</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Mike K Smith <a href="mailto:mstoolkit@googlemail.com">mstoolkit@googlemail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># an example file from the unit tests of the MSToolkit package</span></span></span>
<span class="r-in"><span>  <span class="va">wPath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span> <span class="st">"Runit"</span>, <span class="st">"data"</span>, <span class="st">"createCovariates"</span>, package <span class="op">=</span> <span class="st">"MSToolkit"</span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># sample 20 subjects from the example file</span></span></span>
<span class="r-in"><span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">createExternalCovariates</span><span class="op">(</span> <span class="fl">20</span>, names <span class="op">=</span> <span class="st">"X1"</span>,</span></span>
<span class="r-in"><span>    subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".7 &lt; X1 &lt; .8"</span>, <span class="st">"-1 &lt;= X2 &lt;= 1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    file <span class="op">=</span> <span class="st">"testCovariates.csv"</span>, workingPath <span class="op">=</span> <span class="va">wPath</span> <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span> <span class="va">dat</span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># maintaining the origin of each row</span></span></span>
<span class="r-in"><span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">createExternalCovariates</span><span class="op">(</span> <span class="fl">20</span>, names <span class="op">=</span> <span class="st">"X1, X2"</span>,</span></span>
<span class="r-in"><span>    subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".7 &lt; X1 &lt; .8"</span>, <span class="st">"-1 &lt;= X2 &lt;= 1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    file <span class="op">=</span> <span class="st">"testCovariates.csv"</span>, workingPath <span class="op">=</span> <span class="va">wPath</span>, refCol <span class="op">=</span> <span class="st">"ID"</span> <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span> <span class="va">dat</span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mike K Smith, Rich Pugh, Roman Francois, Francisco Gochez.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

