<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.25">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 14.0px 0.0px; font: 24.0px Arial}
p.p2 {margin: 0.0px 0.0px 14.0px 0.0px; font: 18.0px Arial}
p.p3 {margin: 0.0px 0.0px 12.0px 0.0px; font: 14.0px Arial}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Arial}
p.p5 {margin: 0.0px 0.0px 12.0px 0.0px; font: 14.0px Arial; min-height: 16.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 14.0px Arial}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Times; min-height: 18.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Arial}
span.s1 {text-decoration: underline}
span.s2 {font: 14.0px Courier}
table.t1 {border-collapse: collapse}
td.td1 {width: 875.0px; background-color: #fffa53; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td2 {width: 176.0px; background-color: #cfcfcf; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td3 {width: 688.0px; background-color: #cfcfcf; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td4 {width: 176.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td5 {width: 688.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td6 {background-color: #fffa53; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td7 {width: 702.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td8 {width: 176.0px; height: 53.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td9 {width: 702.0px; height: 53.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td10 {width: 176.0px; height: 57.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td11 {width: 702.0px; height: 57.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td12 {width: 176.0px; height: 88.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td13 {width: 702.0px; height: 88.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td14 {width: 176.0px; height: 76.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
td.td15 {width: 702.0px; height: 76.0px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #cbcbcb #cbcbcb #cbcbcb #cbcbcb; padding: 0.0px 5.0px 0.0px 5.0px}
ul.ul1 {list-style-type: disc}
</style>
</head>
<body>
<p class="p1"><span class="s1"><a href="generatedata(...).html"><b>generateData(...)</b></a></span></p>
<p class="p1"><b>[INCLUDE some of the “Notes” from the MSToolkit LondonR presentation.]</b></p>
<p class="p2"><b>How it works</b></p>
<p class="p3">The <a href="generatedata(...).html"><span class="s1"><b>generateData(...)</b></span></a> function calls the low level generate data components to create sets of simulated data. The following components are called to create aspects of the simulated trial data:</p>
<ul class="ul1">
<li class="li4"><b>createTreatments(...):</b> Creates a dataset of all possible treatment regimes to be allocated to subjects</li>
<li class="li4"><b>allocateTreatments(...):</b> Allocates treatments to subjects in the simulated study</li>
<li class="li4"><b>createCovariates(...):</b> Creates a set of fixed covariates for a simulated population</li>
<li class="li4"><b>createParameters(...):</b> Creates simulated fixed and between subject parameters for subjects in each replicate</li>
<li class="li4"><b>createResponse(...):</b> Creates a simulated response variable based on available derived data</li>
<li class="li4"><b>createMCAR(...):</b> Adds a simulated "missing" flag to the data</li>
<li class="li4"><b>createDropout(...):</b> Adds a simulated "missing" flag to the data based on a dropout function</li>
<li class="li4"><b>createInterims(...):</b> Assigns subjects in the study to interim analyses</li>
<li class="li4"><b>createDirectories(...)</b>: creates ReplicateData directory under the current working directory.</li>
<li class="li4"><b>writeData(...)</b>: Which writes out the simulation replicate data in CSV<span class="Apple-converted-space">&nbsp;</span></li>
</ul>
<p class="p5"><br></p>
<p class="p3">The <a href="generatedata(...).html"><span class="s1"><b>generateData(...)</b></span></a> function iteratively builds and combines the data components for each replicate, and stores the data in the "ReplicateData" subdirectory of the working directory. This data can then be analyzed using a call to the <a href="analyzedata(...).html"><span class="s1"><b>analyzeData(...)</b></span></a> function.</p>
<p class="p2"><b>Arguments</b></p>
<p class="p3">The <a href="generatedata(...).html"><span class="s1"><b>generateData(...)</b></span></a> function takes a number of arguments which are passed down to the various lower level functions.</p>
<table cellspacing="0" cellpadding="0" class="t1">
<tbody>
<tr>
<td colspan="2" valign="middle" class="td1">
<p class="p6"><b>Required Arguments</b></p>
</td>
</tr>
<tr>
<td valign="middle" class="td2">
<p class="p4"><b>Argument Name</b></p>
</td>
<td valign="middle" class="td3">
<p class="p4"><b>Description</b></p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p7">replicateN</p>
</td>
<td valign="middle" class="td5">
<p class="p4">Specifies how many replicates / simulated trials to generate</p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p7">subjects</p>
</td>
<td valign="middle" class="td5">
<p class="p4">TOTAL number of subjects for the whole design. The default behaviour is to allocate subjects to each treatment with equal probability, which may not guarantee equal allocation. See <span class="s2">treatSubj</span> below for further details of treatment allocation methods.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p7">treatDoses</p>
</td>
<td valign="middle" class="td5">
<p class="p4">Specifies the doses to be used in simulations. MSToolkit was designed to evaluate the operating characteristics of clinical trials, but its functionality can be extended to simulate non-clinical trials by thinking of "doses" as other factors which vary between individuals within a simulation replicate.<span class="Apple-converted-space">&nbsp;</span></p>
<p class="p4">In the generated dataset TRT defines the treatment arm to which a subject is allocated and for parallel group designs this has a corresponding, unique value of DOSE. However in the case of parallel group trials, TRT is the treatment sequence to which a subject is allocated and must have a corresponding treatment sequence.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p7">respEqn</p>
</td>
<td valign="middle" class="td5">
<p class="p4">Specifies the linear predictor for generating outcome values. This should be a valid R expression or function. The expression can be written directly in <a href="generatedata(...).html"><span class="s1">generateData(...)</span></a> or an R function defined outside of <a href="generatedata(...).html"><span class="s1">generateData(...)</span></a> can be called. This function must return a vector of equal length to the number of rows in the generated data - one value per subject or one value per observation (TIME) within each subject.</p>
</td>
</tr>
</tbody>
</table>
<p class="p8"><br></p>
<table cellspacing="0" cellpadding="0" class="t1">
<tbody>
<tr>
<td colspan="2" valign="middle" class="td6">
<p class="p6"><b>Optional Arguments</b></p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p7">treatSubj</p>
<p class="p7">treatProp</p>
</td>
<td valign="middle" class="td7">
<p class="p4"><span class="s2">treatSubj</span> specifies the precise number of subjects to allocate to each treatment (the sum of the elements of this vector must equal <span class="s2">subjects</span> above). <span class="s2">treatProp</span> is a vector of proportions specifying how subjects are to be allocated to each treatment in the proportions specified (the vector must be of the same length as the number of treatments - the length of <span class="s2">treatDoses</span> above and sum to 1). Specify only one of these arguments.</p>
<p class="p4"><span class="s2">treatProp</span> defines the probabilities of allocating each treatment and does not guarantee that the exact proportion will be allocated to a given treatment. <span class="s2">treatSubj</span> on the other hand allocates exactly the specified number to each treatment. If the sum of the number of <span class="s2">subjects</span> in treatSubj does not equal subjects (above) then the sum of <span class="s2">treatSubj</span> is used in place of <span class="s2">subjects</span>.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p7">treatType</p>
<p class="p7">treatSeq</p>
<p class="p7">treatPeriod</p>
</td>
<td valign="middle" class="td7">
<p class="p4">If <span class="s2">treatType</span> is "crossover" then <span class="s2">treatSeq</span> should contain the treatment sequences for subjects to be allocated to. Each subject is then randomly allocated to one of the treatment sequences unless <span class="s2">treatSubj</span> is specified as above.<span class="Apple-converted-space">&nbsp;</span></p>
<p class="p4"><span class="s2">treatPeriod</span> defines the timing of observations / response values. If any times are <i>less than zero </i>then it is assumed that DOSE=0 for these measurements i.e. we assume a placebo run-in. For times greater than or equal to zero DOSE is as specified in <span class="s2">treatDoses</span>.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p7">genParNames<span class="Apple-converted-space">&nbsp;</span></p>
<p class="p7">genParMean</p>
<p class="p7">genParVCov</p>
</td>
<td valign="middle" class="td7">
<p class="p4">genParNames defines the names to be used for the data generation model parameters for calculations and in the output dataset. genParMean and genParVCov define the mean value for these parameters and the variance-covariance matrix defining how these parameters will vary across trial replicates. By default we assume that genParVCov = 0 i.e. parameters have fixed values across trial replicates. See the <a href="simulation%20overview.html"><span class="s1">Simulation overview</span></a> page for more information.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p4">genParBtwNames</p>
<p class="p4">genParBtwMean</p>
<p class="p4">genParBtwVCov</p>
<p class="p4">genParBtwCrit</p>
<p class="p4">genParErrStruc</p>
</td>
<td valign="middle" class="td7">
<p class="p4">These parameters define how between subject variability is to be included for the parameters used in respEqn. Variables defined in genParNames which also appear in genParBtwNames will have values generated from a (multivariate) Normal distribution with mean genParBtwMean and variance-covariance matrix genParBtwVCov. By default we assume that genParBtwMean = 0 for all parameters i.e. the parameters used in respEqn will have means specified by genParMean (with between replicate variability specified by genParVCov) and will vary between subjects with covariance genParBtwVCov. This process mirrors the usual hierarchical model construct with fixed and random effects. genParBtwCrit applies ranges to the values generated (similar to conCovCrit above). If genParErrStruc is specified as "additive" or "proportional" then the subject specific variation is added to the fixed effect values in an appropriate way. "additive" simply adds the values, while "proportional" adds the subject specific variation to the logged fixed effect value and then exponentiates. If genParErrStruc is "none" then the two values are returned separately to the generated dataset for the user to combine and use in an appropriate way.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p4">respDist</p>
<p class="p4">respVCov</p>
<p class="p4">respInvLink</p>
<p class="p4">respErrStruc</p>
<p class="p4">respCrit</p>
<p class="p4">respDigits</p>
</td>
<td valign="middle" class="td7">
<p class="p4">These parameters define the distributional properties for the generated response variable. respEqn gives the linear predictor for response, defining how treatments, doses, covariates, time etc. relate to the mean response for an individual. This linear predictor can then be used within a normal distribution to define continuous response variables or, with the appropriate link function (specified in respInvLink), can be used with binomial or poisson distributions to create binary or count data. If we are creating continuous response outcomes then we can specify the residual (or within subject) variability, how this variability is added to the values from respEqn through respErrStruc and whether the generated residual values need to be constrained within certain ranges (given by respCrit). Finally we can specify the number of significant digits for the generated response.<span class="Apple-converted-space">&nbsp;</span></p>
<p class="p4">MSToolkit version 2.0 only uses 1 value for residual error, although future versions will extend this to allow multiple residual error parameters to be created.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td8">
<p class="p4">interimSubj</p>
</td>
<td valign="middle" class="td9">
<p class="p4">interimSubj defines how subjects will be assigned to interim analysis data subsets. This should be a vector of cumulative proportions e.g. c(0.3,0.6) or c(0.25,0.5,0.75). MSToolkit will partition the dataset and allocate subjects randomly to one of the interim analysis subsets.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td10">
<p class="p4">mcarProp</p>
<p class="p4">mcarRule</p>
<p class="p4">dropFun</p>
</td>
<td valign="middle" class="td11">
<p class="p4">These parameters define how missing data is to be generated and rules for dropping subjects. dropFun can be any valid R function and so can use dataset covariates, parameters and responses as drivers for the dropout function.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td12">
<p class="p4">conCovNames</p>
<p class="p4">conCovMean</p>
<p class="p4">conCovVCov</p>
<p class="p4">conCovCrit</p>
<p class="p4">conCovMaxDraws</p>
</td>
<td valign="middle" class="td13">
<p class="p4">These parameters define how continuous covariates are to be generated across subjects within replicates. Values are drawn from (multivariate) Normal distributions. conCovCrit specifies ranges or criteria for each covariate value. If the number of draws from the distribution exceeds conCovMaxDraws before an acceptable value is found then a warning is given.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td14">
<p class="p4">disCovNames</p>
<p class="p4">disCovVals</p>
<p class="p4">disCovProb</p>
<p class="p4">disCovProbArray</p>
</td>
<td valign="middle" class="td15">
<p class="p4">These parameters define how discrete covariates are to be generated across subjects within replicates. Values of the discrete parameters are specified in disCovVals and then these values are generated in proportions given by disCovProb or disCovProbArray if user wish to specify associations between discrete covariate values.</p>
</td>
</tr>
<tr>
<td valign="middle" class="td4">
<p class="p4">extCovNames</p>
<p class="p4">extCovFile</p>
<p class="p4">extCovSubset</p>
<p class="p4">extCovRefCol</p>
<p class="p4">extCovSameRow</p>
<p class="p4">extCovDataId</p>
</td>
<td valign="middle" class="td7">
<p class="p4">Covariate values can be sampled from an external file e.g. an existing database in an ASCII file. These parameters define which variables to sample from the external file, the name of that file and whether to subset the data in that file before sampling. Users can choose to bring into the generated dataset a reference variable identifying which rows of the external datafile have been sampled (in order to check data values). It is also possible to specify whether to sample covariate values independently (default) or whether to sample covariate values from within the same row of the external file, thus preserving correlations between covariates without making normality assumptions. If a value is given for extCovDataId then this is used to identify covariate values from each unique ID within the external datafile.</p>
</td>
</tr>
</tbody>
</table>
<p class="p9"><br></p>
</body>
</html>
 