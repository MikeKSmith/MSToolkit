<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="MSToolkit">
<title>generateData • MSToolkit</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="generateData">
<meta property="og:description" content="MSToolkit">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MSToolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/MSToolkit_intro_vig.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/generate_data.html">generateData</a>
    <a class="dropdown-item" href="../articles/analyze_data.html">analyzeData</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Background Reading</h6>
    <a class="dropdown-item" href="../articles/simulation_overview.html">Simulation Overview</a>
    <a class="dropdown-item" href="../articles/references.html">References</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MikeKSmith/MSToolkit/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="generate_data_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>generateData</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MikeKSmith/MSToolkit/blob/HEAD/vignettes/generate_data.Rmd" class="external-link"><code>vignettes/generate_data.Rmd</code></a></small>
      <div class="d-none name"><code>generate_data.Rmd</code></div>
    </div>

    
    
<style>
tbody{
text-align: justify
}
</style>
<div class="section level2">
<h2 id="how-it-works">How it works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h2>
<p>The <code>generateData</code> function calls the low level generate data components to create sets of simulated data. The following components are called to create aspects of the simulated trial data:</p>
<ul>
<li>createTreatments(…): Creates a dataset of all possible treatment regimes to be allocated to subjects</li>
<li>allocateTreatments(…): Allocates treatments to subjects in the simulated study</li>
<li>createCovariates(…): Creates a set of fixed covariates for a simulated population</li>
<li>createParameters(…): Creates simulated fixed and between subject parameters for subjects in each replicate</li>
<li>createResponse(…): Creates a simulated response variable based on available derived data</li>
<li>createMCAR(…): Adds a simulated “missing” flag to the data</li>
<li>createDropout(…): Adds a simulated “missing” flag to the data based on a dropout function</li>
<li>createInterims(…): Assigns subjects in the study to interim analyses</li>
<li>createDirectories(…): creates ReplicateData directory under the current working directory.</li>
<li>writeData(…): Which writes out the simulation replicate data in CSV</li>
</ul>
<p>The <code>generateData</code> function iteratively builds and combines the data components for each replicate, and stores the data in the <em>“ReplicateData”</em> subdirectory of the working directory. This data can then be analyzed using a call to the <code>analyzeData</code> function.</p>
</div>
<div class="section level2">
<h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h2>
<p>The <code>generateData</code> function takes a number of arguments which are passed down to the various lower level functions.</p>
<div class="section level3">
<h3 id="required-arguments">Required Arguments<a class="anchor" aria-label="anchor" href="#required-arguments"></a>
</h3>
<table class="table">
<colgroup>
<col width="54%">
<col width="45%">
</colgroup>
<thead><tr class="header">
<th align="left">Argument Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">replicateN</td>
<td>Specifies how many replicates / simulated trials to generate</td>
</tr>
<tr class="even">
<td align="left">subjects</td>
<td>TOTAL number of subjects for the whole design. The default behaviour is to allocate subjects to each treatment with equal probability, which may not guarantee equal allocation. See <code>treatSubj</code> below for further details of treatment allocation methods.</td>
</tr>
<tr class="odd">
<td align="left">treatDoses</td>
<td>Specifies the doses to be used in simulations. MSToolkit was designed to evaluate the operating characteristics of clinical trials, but its functionality can be extended to simulate non-clinical trials by thinking of “doses” as other factors which vary between individuals within a simulation replicate. <br> In the generated dataset TRT defines the treatment arm to which a subject is allocated and for parallel group designs this has a corresponding, unique value of DOSE. However in the case of parallel group trials, TRT is the treatment sequence to which a subject is allocated and must have a corresponding treatment sequence.</td>
</tr>
<tr class="even">
<td align="left">respEqn</td>
<td>Specifies the linear predictor for generating outcome values. This should be a valid R expression or function. The expression can be written directly in <code>generateData</code> or an R function defined outside of <code>generateData</code> can be called. This function must return a vector of equal length to the number of rows in the generated data - one value per subject or one value per observation (TIME) within each subject.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="optional-arguments">Optional Arguments<a class="anchor" aria-label="anchor" href="#optional-arguments"></a>
</h3>
<table class="table">
<colgroup>
<col width="54%">
<col width="45%">
</colgroup>
<thead><tr class="header">
<th align="left">Argument Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">treatSubj <br> treatProp</td>
<td>
<code>treatSubj</code> specifies the precise number of subjects to allocate to each treatment (the sum of the elements of this vector must equal subjects above). <code>treatProp</code> is a vector of proportions specifying how subjects are to be allocated to each treatment in the proportions specified (the vector must be of the same length as the number of treatments - the length of <code>treatDoses</code> above and sum to 1). Specify only one of these arguments. <br><code>treatProp</code> defines the probabilities of allocating each treatment and does not guarantee that the exact proportion will be allocated to a given treatment. <code>treatSubj</code> on the other hand allocates exactly the specified number to each treatment. If the sum of the number of subjects in <code>treatSubj</code> does not equal subjects (above) then the sum of <code>treatSubj</code> is used in place of subjects.</td>
</tr>
<tr class="even">
<td align="left">treatType <br> treatSeq <br> treatPeriod</td>
<td>If <code>treatType</code> is “crossover” then <code>treatSeq</code> should contain the treatment sequences for subjects to be allocated to. Each subject is then randomly allocated to one of the treatment sequences unless <code>treatSubj</code> is specified as above. <br><code>treatPeriod</code> defines the timing of observations / response values. If any times are <em>less than zero</em> then it is assumed that DOSE=0 for these measurements (i.e. we assume a placebo run-in). For times greater than or equal to zero DOSE is as specified in <code>treatDoses</code>.</td>
</tr>
<tr class="odd">
<td align="left">genParNames <br> genParMean <br> genParVCov <br> genParNames</td>
<td>
<code>genParNames</code> defines the names to be used for the data generation model parameters for calculations and in the output dataset. <br><code>genParMean</code> and <code>genParVCov</code> define the mean value for these parameters and the variance-covariance matrix defining how these parameters will vary across trial replicates. By default we assume that genParVCov = 0 (i.e. parameters have fixed values across trial replicates). See the <a href="../docs/articles/simulation_overviews.html">Simulation Overview</a>page for more information.</td>
</tr>
<tr class="even">
<td align="left">genParBtwNames <br> genParBtwMean <br> genParBtwVCov <br> genParBtwCrit <br> genParErrStruc</td>
<td>These parameters define how between subject variability is to be included for the parameters used in <code>respEqn</code>. <br> Variables defined in <code>genParNames</code> which also appear in <code>genParBtwNames</code> will have values generated from a (multivariate) Normal distribution with mean <code>genParBtwMean</code> and variance-covariance matrix <code>genParBtwVCov</code>. By default we assume that <code>genParBtwMean</code> = 0 for all parameters i.e. the parameters used in <code>respEqn</code> will have means specified by <code>genParMean</code> (with between replicate variability specified by <code>genParVCov</code>) and will vary between subjects with covariance <code>genParBtwVCov</code>. This process mirrors the usual hierarchical model construct with fixed and random effects. <br><code>genParBtwCrit</code> applies ranges to the values generated (similar to <code>conCovCrit</code> above). <br> If <code>genParErrStruc</code> is specified as “additive” or “proportional” then the subject specific variation is added to the fixed effect values in an appropriate way. “additive” simply adds the values, while “proportional” adds the subject specific variation to the logged fixed effect value and then exponentiates. If <code>genParErrStruc</code> is “none” then the two values are returned separately to the generated dataset for the user to combine and use in an appropriate way.</td>
</tr>
<tr class="odd">
<td align="left">respDist <br> respVCov <br> respInvLink <br> respErrStruc <br> respCrit <br> respDigits</td>
<td>These parameters define the distributional properties for the generated response variable. <br><code>respEqn</code> gives the linear predictor for response, defining how treatments, doses, covariates, time etc. relate to the mean response for an individual. This linear predictor can then be used within a normal distribution to define continuous response variables or, with the appropriate link function (specified in respInvLink), can be used with binomial or poisson distributions to create binary or count data. <br> If we are creating continuous response outcomes then we can specify the residual (or within subject) variability, how this variability is added to the values from <code>respEqn</code> through <code>respErrStruc</code> and whether the generated residual values need to be constrained within certain ranges (given by <code>respCrit</code>). <br> Finally we can specify the number of significant digits for the generated response. <code>MSToolkit</code> version 2.0.0 only uses 1 value for residual error, although future versions will extend this to allow multiple residual error parameters to be created.</td>
</tr>
<tr class="even">
<td align="left">interimSubj</td>
<td>
<code>interimSubj</code> defines how subjects will be assigned to interim analysis data subsets. This should be a vector of cumulative proportions e.g. c(0.3,0.6) or c(0.25,0.5,0.75). <code>MSToolkit</code> will partition the dataset and allocate subjects randomly to one of the interim analysis subsets.</td>
</tr>
<tr class="odd">
<td align="left">mcarProp <br> mcarRule <br> dropFun</td>
<td>These parameters define how missing data is to be generated and rules for dropping subjects. <code>dropFun</code> can be any valid R function and so can use dataset covariates, parameters and responses as drivers for the dropout function.</td>
</tr>
<tr class="even">
<td align="left">conCovNames <br> conCovMean <br> conCovVCov <br> conCovCrit <br> conCovMaxDraws</td>
<td>These parameters define how continuous covariates are to be generated across subjects within replicates. Values are drawn from (multivariate) Normal distributions. <code>conCovCrit</code> specifies ranges or criteria for each covariate value. If the number of draws from the distribution exceeds <code>conCovMaxDraws</code> before an acceptable value is found then a warning is given.</td>
</tr>
<tr class="odd">
<td align="left">disCovNames <br> disCovVals <br> disCovProb <br> disCovProbArray</td>
<td>These parameters define how discrete covariates are to be generated across subjects within replicates. Values of the discrete parameters are specified in <code>disCovVals</code> and then these values are generated in proportions given by <code>disCovProb</code> or <code>disCovProbArray</code> if user wish to specify associations between discrete covariate values.</td>
</tr>
<tr class="even">
<td align="left">extCovNames <br> extCovFile <br> extCovSubset <br> extCovRefCol <br> extCovSameRow <br> extCovDataId</td>
<td>Covariate values can be sampled from an external file (e.g. an existing database in an ASCII file). These parameters define which variables to sample from the external file, the name of that file and whether to subset the data in that file before sampling. Users can choose to bring into the generated dataset a reference variable identifying which rows of the external datafile have been sampled (in order to check data values). It is also possible to specify whether to sample covariate values independently (default) or whether to sample covariate values from within the same row of the external file, thus preserving correlations between covariates without making normality assumptions. If a value is given for <code>extCovDataId</code> then this is used to identify covariate values from each unique ID within the external datafile.</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mike K Smith, Rich Pugh, Roman Francois, Francisco Gochez.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
